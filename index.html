<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Earn Paisa | Premium Earning Platform</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#22c55e">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif}
body{background:#0f172a;color:#fff;transition:.3s}
body.light{background:#f1f5f9;color:#0f172a}

header{display:flex;justify-content:space-between;align-items:center;padding:20px 30px}
.logo{font-size:22px;font-weight:bold;color:#22c55e}
nav a{margin-left:20px;text-decoration:none;color:inherit;font-size:14px}
.toggle{margin-left:15px;padding:6px 14px;border-radius:20px;border:none;background:#22c55e;color:#fff;cursor:pointer}

.hero{text-align:center;padding:100px 20px 60px}
.hero h1{font-size:38px;margin-bottom:15px}
.hero p{opacity:.8;margin-bottom:25px}
.btn{padding:14px 30px;border-radius:40px;background:#22c55e;color:#fff;border:none;cursor:pointer;font-weight:bold}

.section{max-width:1100px;margin:80px auto;padding:0 20px;text-align:center}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:25px;margin-top:40px}

.card{background:rgba(255,255,255,0.06);padding:30px;border-radius:20px;backdrop-filter:blur(12px)}
body.light .card{background:#fff;box-shadow:0 10px 30px rgba(0,0,0,.05)}

.stat{font-size:28px;font-weight:bold;color:#22c55e}

#spinWheel{
width:160px;height:160px;border-radius:50%;
background:conic-gradient(#22c55e 0 60deg,#16a34a 60 120deg,#15803d 120 180deg,#22c55e 180 240deg,#16a34a 240 300deg,#15803d 300 360deg);
margin:20px auto;display:flex;align-items:center;justify-content:center;
font-weight:bold;transition:transform 4s cubic-bezier(.17,.67,.83,.67);
}

footer{text-align:center;padding:40px 20px;opacity:.6}
</style>
</head>

<body>

<header>
<div class="logo">Earn Paisa</div>
<nav>
<a href="login.html">Login</a>
<a href="dashboard.html">Dashboard</a>
<button class="toggle" onclick="toggleMode()">Toggle</button>
</nav>
</header>

<section class="hero">
<h1>Earn Money Online Easily</h1>
<p>Complete simple tasks & withdraw instantly.</p>
<a href="login.html" class="btn">Start Earning</a>
</section>

<section class="section">
<h2>Live Platform Stats</h2>
<div class="grid">
<div class="card">
<div class="stat" id="users">0</div>
<p>Total Users</p>
</div>
<div class="card">
<div class="stat" id="withdraw">â‚¹0</div>
<p>Total Withdraw</p>
</div>
<div class="card">
<div class="stat" id="tasks">0</div>
<p>Total Tasks Completed</p>
</div>
</div>
</section>

<section class="section">
<h2>ðŸŽ¯ Daily Spin & Win</h2>
<div class="card">
<div id="spinWheel">SPIN</div>
<button class="btn" onclick="spinNow()">Spin Now</button>
<p id="spinStatus" style="margin-top:10px;font-size:14px;"></p>
</div>
</section>

<footer>
Â© 2026 Earn Paisa. All rights reserved.
</footer>

<!-- ðŸ”¥ FIREBASE REAL SYSTEM -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, get, update } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyBc_f9XBgUi3HMpFQU40fWJdzxscfV826s",
  authDomain: "paisaeran-43a70.firebaseapp.com",
  databaseURL: "https://paisaeran-43a70-default-rtdb.firebaseio.com",
  projectId: "paisaeran-43a70",
  storageBucket: "paisaeran-43a70.firebasestorage.app",
  messagingSenderId: "856454531468",
  appId: "1:856454531468:web:92ab5b407f2def2cb7aea9"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const auth = getAuth(app);

let currentUser=null;

onAuthStateChanged(auth, async(user)=>{
if(!user) return;
currentUser=user;
loadStats();
});

async function loadStats(){
const usersSnap=await get(ref(db,"users"));
const withdrawSnap=await get(ref(db,"withdrawRequests"));

let totalUsers=0,totalWithdraw=0,totalTasks=0;

if(usersSnap.exists()){
usersSnap.forEach(u=>{
totalUsers++;
const data=u.val();
if(data.completedTasks){
totalTasks+=Object.keys(data.completedTasks).length;
}
});
}

if(withdrawSnap.exists()){
withdrawSnap.forEach(w=>{
totalWithdraw+=w.val().amount||0;
});
}

document.getElementById("users").innerText=totalUsers;
document.getElementById("withdraw").innerText="â‚¹"+totalWithdraw;
document.getElementById("tasks").innerText=totalTasks;
}

/* ðŸŽ¯ REAL DAILY SPIN */
window.spinNow=async function(){
if(!currentUser){alert("Login required");return;}

const userRef=ref(db,"users/"+currentUser.uid);
const snap=await get(userRef);

let balance=0;
let lastSpin=0;

if(snap.exists()){
balance=snap.val().balance||0;
lastSpin=snap.val().lastSpin||0;
}

const ONE_DAY=24*60*60*1000;
const now=Date.now();

if(now-lastSpin<ONE_DAY){
document.getElementById("spinStatus").innerText="â³ Already spun today!";
return;
}

const rewards=[5,10,20,50,100];
const reward=rewards[Math.floor(Math.random()*rewards.length)];

let wheel=document.getElementById("spinWheel");
let rotate=1440+Math.floor(Math.random()*360);
wheel.style.transform="rotate("+rotate+"deg)";

setTimeout(async()=>{
await update(userRef,{
balance:balance+reward,
lastSpin:now
});
document.getElementById("spinStatus").innerText="ðŸŽ‰ You won â‚¹"+reward;
loadStats();
},4000);
};
</script>

<script>
function toggleMode(){
document.body.classList.toggle("light");
}
</script>

</body>
</html>
